<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="report_payment">
    <t t-call="report.html_container">
        <t t-set="data_report_margin_top" t-value="12"/>
        <t t-set="data_report_header_spacing" t-value="9"/>
        <t t-set="data_report_dpi" t-value="110"/>
        <t t-call="report.internal_layout">
            <div class="page">
                <h2>REGISTRO DE ENTREGA DE CHEQUES</h2>

                <div class="row mt32">
                    <div class="col-xs-3">
                        <strong>Company:</strong>
                        <p t-esc="res_company.name"/>
                    </div>
                    <div class="col-xs-3">
                        <strong>Month:</strong>
                        <p t-esc="get_month(docs)"/>
                    </div>
                    <div class="col-xs-3">
                        <strong>Year:</strong>
                        <p t-esc="get_year(docs)"/>
                    </div>
                </div>

                <table class="table table-condensed">
                    <thead>
                        <tr style="border-top: 1px double #000000; border-bottom: 1px double #000000; border-left: 1px double #000000; border-right: 1px double #000000; padding-top: 0cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0cm">
                            <th align="center" style="border-right: 1px double #000000">Number</th>
                            <th align="center" style="border-right: 1px double #000000">Codigo</th>
                            <th align="left" style="border-right: 1px double #000000">Partner</th>
                            <th align="center" style="border-right: 1px double #000000">Amount</th>
                            <th align="center" style="border-right: 1px double #000000">Date</th>
                            <th align="center" style="border-right: 1px double #000000">Invoices</th>
                             <th align="center" style="border-right: 1px double #000000">Recibe</th>
                             <th align="center" style="border-right: 1px double #000000">Fecha</th>
                             <th align="center" style="border-right: 1px double #000000">Firma</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="total_fac" t-value="0"/>
                        <t t-set="total_chk" t-value="0"/>
                        <tr t-foreach="docs" t-as="o" style="border-top: 1px double #000000; border-bottom: 1px double #000000; border-left: 1px double #000000; border-right: 1px double #000000; padding-top: 0cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0cm">
                            <td align="center" style="border-right: 1px double #000000"><span t-esc="o.transfer_number"/></td>
                            <td align="center" style="border-right: 1px double #000000"><span t-esc="o.partner_id.ref"/></td>
                            <td align="center" style="border-right: 1px double #000000"><span t-esc="o.partner_id.name"/></td>
                            <td align="center" style="border-right: 1px double #000000"><span t-esc="o.amount"/></td>
                            <td align="center" style="border-right: 1px double #000000"><span t-esc="o.payment_date"/></td>
                            <td style="border-right: 1px double #000000">
                                <table>
                                    <tbody>
                                        <t t-set="invoices" t-value="get_invoices(o)"/>
                                        <tr t-foreach="invoices" t-as="invoice">
                                            <td align="center" style="border-right: 1px double #000000;padding-left:5px;padding-right:5px;"><span t-esc="invoice.number"/></td>
                                            <td align="center" style="padding-left:5px;padding-right:5px;"><span t-esc="invoice.amount_total"/></td>
                                            <t t-set="total_fac" t-value="total_fac+invoice.amount_total"/>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                            <td style="border-right: 1px double #000000"></td>
                            <td style="border-right: 1px double #000000"></td>
                            <td style="border-right: 1px double #000000"></td>
                            <t t-set="total_chk" t-value="total_chk+o.amount"/>

                        </tr>
                    </tbody>
                    <tr style="border-top: 1px double #000000; border-bottom: 1px double #000000; border-left: 1px double #000000; border-right: 1px double #000000; padding-top: 0cm; padding-bottom: 0cm; padding-left: 0cm; padding-right: 0cm">
                        <th align="right" style="border-right: 1px double #000000" colspan="3">Total</th>
                        <th align="right" style="border-right: 1px double #000000"><span t-esc="total_chk"/></th>
                        <th align="center" style="border-right: 1px double #000000">Total</th>
                        <th align="right" style="border-right: 1px double #000000"><span t-esc="total_fac"/></th>
                        <th align="center" style="border-right: 1px double #000000" colspan="3"></th>

                    </tr>
                </table>
            <p>
            Con <span t-esc="round(total_fac-total_chk,2)"/> pesos en pagos anticipados
            </p>
             <p>
            Elaborado por: <span t-esc="user_name"/>
            </p>
            </div>
        </t>

    </t>
</template>
</odoo>
